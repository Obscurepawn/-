<!-- pages/cashBook/cashBook.wxml -->
<!-- <text>pages/cashBook/cashBook.wxml</text> -->
<wxs module="tools" src="./cashBookFunc.wxs"></wxs>
<view class="page" hover-class="none" hover-sto-ppropagation="false">
	<view class="count" hover-class="none" hover-stop-propagation="false">
		<!-- <text style="float: left;height: 25px;color:white;">{{time}}</text>
		<text style="float: right;height: 25px;color:white;" space="ensp">本月 支出:{{expenditrue}} 收入:{{income}}</text> -->
		<picker mode="date" value="{{countMonth}}" start="1970-1" end="{{time}}" bindchange="sumChange" fields="month" style="width:100%;">
			<view class="counMonthButton" style="width:{{countMonth==tools.get_Year_Month(time)?'55px':'80px'}}">
				{{countMonth==tools.get_Year_Month(time)?'本月':countMonth}}
				<image id="invertedTriangle" src="/images/cashBook/invertedTriangle.png" mode="aspectFit|aspectFill|widthFix" lazy-load="false" binderror="" bindload=""></image>
			</view>
		  </picker>
		<view style="color:white;position:absolute;top:0%;right:8%;font-size:13px;font-weight:600;white-space:pre-wrap" space="ensp">支出:{{expenditrue}}\n收入: {{income}}</view>
		<view style="color:white;position:absolute;top:1.5%;right:3%;font-size:13px;font-weight:600;" space="ensp">〉</view> 
	</view>
	<view>
		<mp-searchbar style="z-index:9999" bindselectresult="selectResult" search="{{search}}" bindcancel="showAll" style="width:100%" ></mp-searchbar>
	</view>
	<modal height='60%' bindcancel="modalCancel" bindconfirm='modalConfirm' wx:if="{{tab==2}}">
		<view class="section">
  			<picker mode="date" value="{{time}}" start="1970-1-1" end="{{time}}" bindchange="bindDateChange" style="width:100%;">
    			<view class="formrow" >
					  <text class="field" style="font-size:">消费日期:</text>
					  <text class="field" style="float:right;">{{showTime}}</text>
    			</view>
  			</picker>
		</view>
		<text>\n</text>
		<view class="section">
  			<picker value="{{useIndex}}" range="{{useList}}" bindchange="bindUseChange" style="width:100%;">
    			<view class="formrow" >
					  <text class="field" style="font-size:">消费类型:</text>  
					  <text class="field" style="float:right;">{{useList[useIndex]}}</text>
    			</view>
  			</picker>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">金额<text style="color:red">*</text></text> 
			   <input type="text" class="input" bindinput="inputAmount" placeholder="必填项"/>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">付款/收益人</text> 
			   <input type="text" class="input" bindinput="inputPayer" value="我"/>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">备注</text> 
			   <input type="text" class="input" bindinput="inputComment"/>
		</view>
	</modal>
	<modal height='60%' bindcancel="modalCancel" bindconfirm='updateBill' wx:if="{{tab==5}}">
		<view class="section">
  			<picker mode="date" value="{{showTime}}" start="1970-1-1" end="{{time}}" bindchange="bindDateChange" style="width:100%;">
    			<view class="formrow" >
					  <text class="field" style="font-size:">date:</text>
					  <text class="field" style="float:right;">{{showTime}}</text>
    			</view>
  			</picker>
		</view>
		<text>\n</text>
		<view class="section">
  			<picker value="{{useIndex}}" range="{{useList}}" bindchange="bindUseChange" style="width:100%;">
    			<view class="formrow" >
					  <text class="field" style="font-size:">UseList:</text>  
					  <text class="field" style="float:right;">{{useList[useIndex]}}</text>
    			</view>
  			</picker>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">金额<text style="color:red">*</text></text> 
			   <input type="text" class="input" bindinput="inputAmount" placeholder="必填项" value="{{updatedObject.amount}}"/>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">付款/收益人</text> 
			   <input type="text" class="input" bindinput="inputPayer" value="{{updatedObject.payer}}"/>
		</view>
		<text>\n</text>
		<view class='formrow'>
			   <text class="field">备注</text> 
			   <input type="text" class="input" bindinput="inputComment" value="{{updatedObject.comments}}"/>
		</view>
	</modal>
	<view class="bill" wx:for="{{show}}" wx:for-item="item" wx:for-index="index" wx:key="index">
		<view class="moneyIO">
			<text class="sum" style="float: left;height: auto;">{{item.date}}</text>
			<text class="sum" style="float: right;height: auto;">支出:{{item.expenditrue}} 收入:{{item.income}}</text>
			<text>\n</text>
		</view>
		<view class="singleBill" wx:for="{{item.detail}}" wx:for-index="Index" wx:for-item="Item" wx:key="Index" data-insideIndex="{{Index}}" data-outsideIndex="{{index}}" bindtap="chooseBill" >
		<view class="{{Item.isChosen ? 'isChosen' : ''}}">
			<text>\n</text>
			<image src="{{tools.iconPath(Item)}}" class="icon"></image>
			<text space="nbsp" class="usefulness">       {{Item.usefulness}}</text>
			<text class="comment">备注:<text wx:if="{{Item.payer!='我'}}">[支付人:{{Item.payer}}]</text>{{Item.comments}}</text>
			<text style="float:right;color:{{tools.color(Item.amount)}};" class="billfont">{{Item.amount}}</text>
		</view>
		</view>
		<view class="line"></view>
	</view>
	<text>\n</text>
	<text>\n</text>
	<text>\n</text>
	<text>\n</text>
	<text>\n</text>
	<mp-tabbar style="position:fixed;bottom:0;width:100%;left:0;right:0;z-index:100;" list="{{list}}" current="{{tab}}" bindchange="tabChange"></mp-tabbar>
</view>